
<html>
  <head>
    <!-- Credit to Shanimal on StackExchange for template code -->
    <title>Template Test</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/researchCardExample.css">

    <!-- Install jQuery and underscore -->
    <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
    <script src="https://www.parsecdn.com/js/parse-1.1.15.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  </head>
  <body>

    <!-- Create your template -->
    <script type="foo/bar" id="studyCard">
    <div class = "cardpadding">
        <div class = "container-fluid card">
          <div class = "row row-xs-height">
            <div class = "col-xs-3 col-xs-height col-middle">
              <div class = "text-center pricecard">
                $<%= pay %>
              </div>
            </div>
            <div class = "col-xs-9 col-xs-height">
              <div class = "infocard">
                <div class = "row">
                  <div class = "col-xs-12">
                    <span class = "cardTitle"><%= title %></span>
                  </div>
                </div>
                <div class = "row">
                  <div class = "col-xs-12">
                      <span class = "cardReq">Reqs: <%= requirements %></span>
                  </div>
                </div>
                <br>
                <div class = "row">
                  <div class = "col-xs-4">
                    <span class = "cardBottom"><%= duration %></span>
                  </div>
                  <div class = "col-xs-8 text-right">
                    <span class = "cardBottom">Deadline: <%= expiration %> days</span>
                  </div>
                </div>
                <br>
              </div>
            </div>
          </div>
        </div>
      </div>
      <br>
    </script>

    <div class = "header">
      <center><img src = "img/title.png" id = "titleimg"></center>
    </div>
    <br>

    <!-- Create target -->

    <div id="target"></div>

    <!-- Some code to fetch the data and apply template -->

    <script type="text/javascript">
      Parse.initialize("2Adfr8LRfl5VwX8WgHQHRKZo6GpNcsiUvdBXoBya", "xGwCwmFcuKXxI9JwDuRcJs8uch6UMQAYPre18dzH");
      var temp = $("#studyCard").html();
      var us_temp = _.template(temp);
      var createCard = function(a) {$("#target").append(us_temp(a))};
      var ResearchStudy = Parse.Object.extend("ResearchStudy");
      var query = new Parse.Query(ResearchStudy);
      query.find({
              success: function(results) {
                results.forEach(function(result){
                    createCard(result.attributes)
                  });
              },
              error: function(error) {
                // error is an instance of Parse.Error.
              }
            });

      //var template = $("#studyCard").html();
      //$("#target").html(_.template(template,{items:items}));
    </script>
  </body>
</html>
